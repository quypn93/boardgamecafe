@using EscapeRoomFinder.Models.Domain
@{
    ViewData["Title"] = "Admin Dashboard";
    Layout = "_AdminLayout";
}

<h1 class="mb-4"><i class="bi bi-speedometer2"></i> Admin Dashboard</h1>

<div class="row g-4 mb-4">
    <div class="col-md-3">
        <div class="card bg-primary text-white">
            <div class="card-body">
                <h5 class="card-title">Venues</h5>
                <h2>@ViewBag.TotalVenues</h2>
                <a href="/admin/venues" class="text-white">Manage Venues <i class="bi bi-arrow-right"></i></a>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-success text-white">
            <div class="card-body">
                <h5 class="card-title">Escape Rooms</h5>
                <h2>@ViewBag.TotalRooms</h2>
                <a href="/admin/rooms" class="text-white">Manage Rooms <i class="bi bi-arrow-right"></i></a>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-info text-white">
            <div class="card-body">
                <h5 class="card-title">Users</h5>
                <h2>@ViewBag.TotalUsers</h2>
                <a href="/admin/users" class="text-white">Manage Users <i class="bi bi-arrow-right"></i></a>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-warning text-dark">
            <div class="card-body">
                <h5 class="card-title">Pending Reviews</h5>
                <h2>@ViewBag.PendingReviews</h2>
                <a href="/admin/reviews?pending=true" class="text-dark">Review Now <i class="bi bi-arrow-right"></i></a>
            </div>
        </div>
    </div>
</div>

<div class="row g-4 mb-4">
    <div class="col-md-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"><i class="bi bi-star"></i> Premium Listings</h5>
                <h2>@ViewBag.PremiumListings</h2>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"><i class="bi bi-journal"></i> Blog Posts</h5>
                <h2>@ViewBag.TotalBlogPosts</h2>
                <a href="/admin/blog" class="text-primary">Manage Blog <i class="bi bi-arrow-right"></i></a>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"><i class="bi bi-chat-left-text"></i> Total Reviews</h5>
                <h2>@ViewBag.TotalReviews</h2>
                <a href="/admin/reviews" class="text-primary">View All <i class="bi bi-arrow-right"></i></a>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"><i class="bi bi-cloud-download"></i> Crawl Data</h5>
                <a href="/admin/crawl" class="btn btn-outline-primary btn-sm w-100">
                    <i class="bi bi-search"></i> Crawl New Venues
                </a>
            </div>
        </div>
    </div>
</div>

<div class="row g-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-clock-history"></i> Recent Venues</h5>
            </div>
            <ul class="list-group list-group-flush">
                @foreach (var venue in (List<EscapeRoomVenue>)ViewBag.RecentVenues)
                {
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <strong>@venue.Name</strong>
                            <br>
                            <small class="text-muted">@venue.City | @venue.TotalRooms rooms</small>
                        </div>
                        <a href="/admin/venues/edit/@venue.VenueId" class="btn btn-sm btn-outline-primary">Edit</a>
                    </li>
                }
            </ul>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-chat-left-text"></i> Recent Reviews</h5>
            </div>
            <ul class="list-group list-group-flush">
                @foreach (var review in (List<Review>)ViewBag.RecentReviews)
                {
                    <li class="list-group-item">
                        <div class="d-flex justify-content-between">
                            <strong>@(review.User?.DisplayName ?? "Anonymous")</strong>
                            <span class="text-warning">@(new string('â˜…', review.Rating))</span>
                        </div>
                        <small class="text-muted">
                            @review.Venue?.Name |
                            @(review.IsApproved ? "Approved" : "Pending")
                        </small>
                    </li>
                }
            </ul>
        </div>
    </div>
</div>
